{
  "nodes": [
    {
      "id": "temp-sensor-1",
      "type": "Sensor",
      "width": 120,
      "height": 170,
      "data": {
        "name": "Temperature Sensor",
        "location": "Building A - Floor 1",
        "frequency": "1Hz",
        "range": "-40\u00b0C to 125\u00b0C"
      },
      "x": 100,
      "y": 50,
      "zIndex": 1,
      "ports": [
        {
          "id": "data-out",
          "name": "Temperature",
          "dataType": "telemetry",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 40
          },
          "type": "output"
        }
      ]
    },
    {
      "id": "humidity-sensor-1",
      "type": "Sensor",
      "width": 120,
      "height": 170,
      "data": {
        "name": "Humidity Sensor",
        "location": "Building A - Floor 1",
        "frequency": "1Hz",
        "range": "0-100% RH"
      },
      "x": 100,
      "y": 150,
      "zIndex": 1,
      "ports": [
        {
          "id": "data-out",
          "name": "Humidity",
          "dataType": "telemetry",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 40
          },
          "type": "output"
        }
      ]
    },
    {
      "id": "motion-sensor-1",
      "type": "Sensor",
      "width": 120,
      "height": 170,
      "data": {
        "name": "PIR Motion Sensor",
        "location": "Building A - Entrance",
        "detection_range": "10m",
        "angle": "120\u00b0"
      },
      "x": 100,
      "y": 250,
      "zIndex": 1,
      "ports": [
        {
          "id": "data-out",
          "name": "Motion",
          "dataType": "telemetry",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 40
          },
          "type": "output"
        }
      ]
    },
    {
      "id": "energy-meter-1",
      "type": "Sensor",
      "width": 120,
      "height": 170,
      "data": {
        "name": "Smart Energy Meter",
        "location": "Building A - Main",
        "phases": 3,
        "accuracy": "\u00b10.5%"
      },
      "x": 100,
      "y": 350,
      "zIndex": 1,
      "ports": [
        {
          "id": "data-out",
          "name": "Power Usage",
          "dataType": "telemetry",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 40
          },
          "type": "output"
        }
      ]
    },
    {
      "id": "edge-gateway",
      "type": "Gateway",
      "width": 140,
      "height": 170,
      "data": {
        "name": "IoT Edge Gateway",
        "protocol": "MQTT",
        "buffer": "1000 messages",
        "edge_compute": true,
        "compression": "gzip"
      },
      "x": 300,
      "y": 200,
      "zIndex": 2,
      "ports": [
        {
          "id": "temp-in",
          "name": "Temp Data",
          "dataType": "telemetry",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 20
          },
          "type": "input"
        },
        {
          "id": "humidity-in",
          "name": "Humidity Data",
          "dataType": "telemetry",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 50
          },
          "type": "input"
        },
        {
          "id": "motion-in",
          "name": "Motion Data",
          "dataType": "telemetry",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 80
          },
          "type": "input"
        },
        {
          "id": "energy-in",
          "name": "Energy Data",
          "dataType": "telemetry",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 110
          },
          "type": "input"
        },
        {
          "id": "aggregated-out",
          "name": "Aggregated",
          "dataType": "stream",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 40
          },
          "type": "output"
        },
        {
          "id": "alerts-out",
          "name": "Local Alerts",
          "dataType": "alert",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 80
          },
          "type": "output"
        }
      ]
    },
    {
      "id": "mqtt-broker",
      "type": "MessageBroker",
      "width": 140,
      "height": 170,
      "data": {
        "name": "MQTT Message Broker",
        "qos_levels": [
          0,
          1,
          2
        ],
        "topics": 50,
        "connections": 10000,
        "throughput": "100k msg/sec"
      },
      "x": 550,
      "y": 200,
      "zIndex": 3,
      "ports": [
        {
          "id": "messages-in",
          "name": "Messages",
          "dataType": "stream",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 50
          },
          "type": "input"
        },
        {
          "id": "topic-temp",
          "name": "Temperature",
          "dataType": "stream",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 20
          },
          "type": "output"
        },
        {
          "id": "topic-env",
          "name": "Environment",
          "dataType": "stream",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 50
          },
          "type": "output"
        },
        {
          "id": "topic-security",
          "name": "Security",
          "dataType": "stream",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 80
          },
          "type": "output"
        }
      ]
    },
    {
      "id": "stream-processor",
      "type": "StreamProcessing",
      "width": 160,
      "height": 170,
      "data": {
        "name": "Apache Kafka Streams",
        "partitions": 12,
        "replication": 3,
        "window": "5 minutes",
        "operations": [
          "Filter",
          "Aggregate",
          "Join",
          "Window"
        ]
      },
      "x": 800,
      "y": 100,
      "zIndex": 4,
      "ports": [
        {
          "id": "temp-stream",
          "name": "Temp Stream",
          "dataType": "stream",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 30
          },
          "type": "input"
        },
        {
          "id": "env-stream",
          "name": "Env Stream",
          "dataType": "stream",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 60
          },
          "type": "input"
        },
        {
          "id": "rules-in",
          "name": "Rules",
          "dataType": "config",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 90
          },
          "type": "input"
        },
        {
          "id": "processed-out",
          "name": "Processed",
          "dataType": "data",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 40
          },
          "type": "output"
        },
        {
          "id": "anomalies-out",
          "name": "Anomalies",
          "dataType": "alert",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 80
          },
          "type": "output"
        }
      ]
    },
    {
      "id": "time-series-db",
      "type": "Database",
      "width": 140,
      "height": 170,
      "data": {
        "name": "InfluxDB",
        "retention": "90 days",
        "shards": 4,
        "precision": "nanosecond",
        "compression": "TSM"
      },
      "x": 1050,
      "y": 200,
      "zIndex": 5,
      "ports": [
        {
          "id": "data-in",
          "name": "Time Series",
          "dataType": "data",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 60
          },
          "type": "input"
        },
        {
          "id": "query-out",
          "name": "Query Results",
          "dataType": "data",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 30
          },
          "type": "output"
        },
        {
          "id": "metrics-out",
          "name": "Metrics",
          "dataType": "metrics",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 60
          },
          "type": "output"
        },
        {
          "id": "export-out",
          "name": "Export",
          "dataType": "data",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 90
          },
          "type": "output"
        }
      ]
    },
    {
      "id": "ml-engine",
      "type": "MLProcessing",
      "width": 140,
      "height": 170,
      "data": {
        "name": "TensorFlow Serving",
        "models": [
          "Anomaly Detection",
          "Predictive Maintenance",
          "Energy Optimization"
        ],
        "accuracy": "94%",
        "inference_time": "<50ms"
      },
      "x": 800,
      "y": 350,
      "zIndex": 4,
      "ports": [
        {
          "id": "training-data",
          "name": "Training Data",
          "dataType": "data",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 40
          },
          "type": "input"
        },
        {
          "id": "live-data",
          "name": "Live Data",
          "dataType": "stream",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 80
          },
          "type": "input"
        },
        {
          "id": "predictions-out",
          "name": "Predictions",
          "dataType": "prediction",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 30
          },
          "type": "output"
        },
        {
          "id": "model-out",
          "name": "Model",
          "dataType": "model",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 60
          },
          "type": "output"
        },
        {
          "id": "insights-out",
          "name": "Insights",
          "dataType": "report",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 90
          },
          "type": "output"
        }
      ]
    },
    {
      "id": "dashboard",
      "type": "Visualization",
      "width": 140,
      "height": 170,
      "data": {
        "name": "Grafana Dashboard",
        "panels": 24,
        "refresh_rate": "5s",
        "alerts": 15,
        "users": 50
      },
      "x": 1300,
      "y": 100,
      "zIndex": 6,
      "ports": [
        {
          "id": "metrics-in",
          "name": "Metrics",
          "dataType": "metrics",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 30
          },
          "type": "input"
        },
        {
          "id": "alerts-in",
          "name": "Alerts",
          "dataType": "alert",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 60
          },
          "type": "input"
        },
        {
          "id": "predictions-in",
          "name": "Predictions",
          "dataType": "prediction",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 90
          },
          "type": "input"
        },
        {
          "id": "report-out",
          "name": "Reports",
          "dataType": "document",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 60
          },
          "type": "output"
        }
      ]
    },
    {
      "id": "alert-manager",
      "type": "AlertSystem",
      "width": 140,
      "height": 170,
      "data": {
        "name": "Alert Management",
        "rules": 45,
        "escalation": "3 levels",
        "channels": [
          "Email",
          "SMS",
          "Slack",
          "PagerDuty"
        ],
        "deduplication": true
      },
      "x": 1050,
      "y": 450,
      "zIndex": 5,
      "ports": [
        {
          "id": "anomalies-in",
          "name": "Anomalies",
          "dataType": "alert",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 30
          },
          "type": "input"
        },
        {
          "id": "thresholds-in",
          "name": "Thresholds",
          "dataType": "config",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 60
          },
          "type": "input"
        },
        {
          "id": "predictions-in",
          "name": "Predictions",
          "dataType": "prediction",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 90
          },
          "type": "input"
        },
        {
          "id": "email-out",
          "name": "Email",
          "dataType": "notification",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 20
          },
          "type": "output"
        },
        {
          "id": "sms-out",
          "name": "SMS",
          "dataType": "notification",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 50
          },
          "type": "output"
        },
        {
          "id": "webhook-out",
          "name": "Webhook",
          "dataType": "trigger",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 80
          },
          "type": "output"
        }
      ]
    },
    {
      "id": "automation-engine",
      "type": "Automation",
      "width": 140,
      "height": 170,
      "data": {
        "name": "Automation Controller",
        "workflows": 25,
        "actions": [
          "HVAC Control",
          "Lighting",
          "Security",
          "Maintenance"
        ],
        "response_time": "<100ms"
      },
      "x": 1300,
      "y": 350,
      "zIndex": 6,
      "ports": [
        {
          "id": "triggers-in",
          "name": "Triggers",
          "dataType": "trigger",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 30
          },
          "type": "input"
        },
        {
          "id": "conditions-in",
          "name": "Conditions",
          "dataType": "config",
          "position": "left",
          "offset": {
            "x": -2,
            "y": 60
          },
          "type": "input"
        },
        {
          "id": "actions-out",
          "name": "Actions",
          "dataType": "command",
          "position": "right",
          "offset": {
            "x": 2,
            "y": 50
          },
          "type": "output"
        }
      ]
    }
  ],
  "connections": [
    {
      "id": "conn-1",
      "sourceNodeId": "temp-sensor-1",
      "sourcePortId": "data-out",
      "targetNodeId": "edge-gateway",
      "targetPortId": "temp-in"
    },
    {
      "id": "conn-2",
      "sourceNodeId": "humidity-sensor-1",
      "sourcePortId": "data-out",
      "targetNodeId": "edge-gateway",
      "targetPortId": "humidity-in"
    },
    {
      "id": "conn-3",
      "sourceNodeId": "motion-sensor-1",
      "sourcePortId": "data-out",
      "targetNodeId": "edge-gateway",
      "targetPortId": "motion-in"
    },
    {
      "id": "conn-4",
      "sourceNodeId": "energy-meter-1",
      "sourcePortId": "data-out",
      "targetNodeId": "edge-gateway",
      "targetPortId": "energy-in"
    },
    {
      "id": "conn-5",
      "sourceNodeId": "edge-gateway",
      "sourcePortId": "aggregated-out",
      "targetNodeId": "mqtt-broker",
      "targetPortId": "messages-in"
    },
    {
      "id": "conn-6",
      "sourceNodeId": "mqtt-broker",
      "sourcePortId": "topic-temp",
      "targetNodeId": "stream-processor",
      "targetPortId": "temp-stream"
    },
    {
      "id": "conn-7",
      "sourceNodeId": "mqtt-broker",
      "sourcePortId": "topic-env",
      "targetNodeId": "stream-processor",
      "targetPortId": "env-stream"
    },
    {
      "id": "conn-8",
      "sourceNodeId": "stream-processor",
      "sourcePortId": "processed-out",
      "targetNodeId": "time-series-db",
      "targetPortId": "data-in"
    },
    {
      "id": "conn-9",
      "sourceNodeId": "time-series-db",
      "sourcePortId": "query-out",
      "targetNodeId": "ml-engine",
      "targetPortId": "training-data"
    },
    {
      "id": "conn-10",
      "sourceNodeId": "mqtt-broker",
      "sourcePortId": "topic-env",
      "targetNodeId": "ml-engine",
      "targetPortId": "live-data"
    },
    {
      "id": "conn-11",
      "sourceNodeId": "time-series-db",
      "sourcePortId": "metrics-out",
      "targetNodeId": "dashboard",
      "targetPortId": "metrics-in"
    },
    {
      "id": "conn-12",
      "sourceNodeId": "stream-processor",
      "sourcePortId": "anomalies-out",
      "targetNodeId": "alert-manager",
      "targetPortId": "anomalies-in"
    },
    {
      "id": "conn-13",
      "sourceNodeId": "ml-engine",
      "sourcePortId": "predictions-out",
      "targetNodeId": "alert-manager",
      "targetPortId": "predictions-in"
    },
    {
      "id": "conn-14",
      "sourceNodeId": "ml-engine",
      "sourcePortId": "predictions-out",
      "targetNodeId": "dashboard",
      "targetPortId": "predictions-in"
    },
    {
      "id": "conn-15",
      "sourceNodeId": "alert-manager",
      "sourcePortId": "webhook-out",
      "targetNodeId": "automation-engine",
      "targetPortId": "triggers-in"
    },
    {
      "id": "conn-16",
      "sourceNodeId": "edge-gateway",
      "sourcePortId": "alerts-out",
      "targetNodeId": "dashboard",
      "targetPortId": "alerts-in"
    }
  ],
  "viewport": {
    "x": -50,
    "y": -50,
    "zoom": 0.8
  }
}